<html><head><title>SCMIRLive</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#SCMIR'>SCMIR</a></div>
<h1>SCMIRLive</h1>
<div id='summary'>Represents a live feature extractor for the SCMIR analysis system</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /Users/federicoreuben/Library/Application Support/SuperCollider/Extensions/SCMIR/SCMIRExtensions/Classes/<a href='file:///Users/federicoreuben/Library/Application Support/SuperCollider/Extensions/SCMIR/SCMIRExtensions/Classes/SCMIRLive.sc'>SCMIRLive.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/SCMIRAudioFile.html">SCMIRAudioFile</a>, <a href="./../Classes/SCMIRSimilarityMatrix.html">SCMIRSimilarityMatrix</a>, <a href="./../Classes/SCMIR.html">SCMIR</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented class methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*livecount'>livecount</a> </li>
<li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*newFromFile'>newFromFile</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-changewhichlive'>changewhichlive</a> </li>
<li class='toc3'><a href='#-controlbusses'>controlbusses</a> </li>
<li class='toc3'><a href='#-createResponder'>createResponder</a> </li>
<li class='toc3'><a href='#-createSynthDef'>createSynthDef</a> </li>
<li class='toc3'><a href='#-featurehop'>featurehop</a> </li>
<li class='toc3'><a href='#-featureinfo'>featureinfo</a> </li>
<li class='toc3'><a href='#-initSCMIRLive'>initSCMIRLive</a> </li>
<li class='toc3'><a href='#-latestfeatures'>latestfeatures</a> </li>
<li class='toc3'><a href='#-load'>load</a> </li>
<li class='toc3'><a href='#-normalizationinfo'>normalizationinfo</a> </li>
<li class='toc3'><a href='#-normtype'>normtype</a> </li>
<li class='toc3'><a href='#-numfeatures'>numfeatures</a> </li>
<li class='toc3'><a href='#-oscname'>oscname</a> </li>
<li class='toc3'><a href='#-removeResponder'>removeResponder</a> </li>
<li class='toc3'><a href='#-responder'>responder</a> </li>
<li class='toc3'><a href='#-run'>run</a> </li>
<li class='toc3'><a href='#-save'>save</a> </li>
<li class='toc3'><a href='#-synth'>synth</a> </li>
<li class='toc3'><a href='#-synthdefname'>synthdefname</a> </li>
<li class='toc3'><a href='#-whichlive'>whichlive</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Run feature extraction and normalization live. <h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented class methods'>Undocumented class methods</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*livecount' href='./../Overviews/Methods.html#livecount'>livecount</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*livecount' href='./../Overviews/Methods.html#livecount'>livecount</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>scmiraudiofile</span>, <span class='argstr'>featurenorms</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*newFromFile' href='./../Overviews/Methods.html#newFromFile'>newFromFile</a> (<span class='argstr'>filename</span>)</h3>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-changewhichlive' href='./../Overviews/Methods.html#changewhichlive'>changewhichlive</a> (<span class='argstr'>newwhichlive</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-controlbusses' href='./../Overviews/Methods.html#controlbusses'>controlbusses</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-createResponder' href='./../Overviews/Methods.html#createResponder'>createResponder</a> (<span class='argstr'>function</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-createSynthDef' href='./../Overviews/Methods.html#createSynthDef'>createSynthDef</a> (<span class='argstr'>synthdefcalled</span>, <span class='argstr'>normalize: true</span>, <span class='argstr'>sendosc: true</span>, <span class='argstr'>controlbusses: true</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-featurehop' href='./../Overviews/Methods.html#featurehop'>featurehop</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-featureinfo' href='./../Overviews/Methods.html#featureinfo'>featureinfo</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-initSCMIRLive' href='./../Overviews/Methods.html#initSCMIRLive'>initSCMIRLive</a> (<span class='argstr'>scmiraudiofile</span>, <span class='argstr'>featurenorms</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-latestfeatures' href='./../Overviews/Methods.html#latestfeatures'>latestfeatures</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-load' href='./../Overviews/Methods.html#load'>load</a> (<span class='argstr'>filename</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-normalizationinfo' href='./../Overviews/Methods.html#normalizationinfo'>normalizationinfo</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-normtype' href='./../Overviews/Methods.html#normtype'>normtype</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-numfeatures' href='./../Overviews/Methods.html#numfeatures'>numfeatures</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-oscname' href='./../Overviews/Methods.html#oscname'>oscname</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-oscname' href='./../Overviews/Methods.html#oscname'>oscname</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-removeResponder' href='./../Overviews/Methods.html#removeResponder'>removeResponder</a> (<span class='argstr'>function</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-responder' href='./../Overviews/Methods.html#responder'>responder</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-run' href='./../Overviews/Methods.html#run'>run</a> (<span class='argstr'>inputbus: 8</span>, <span class='argstr'>group</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-save' href='./../Overviews/Methods.html#save'>save</a> (<span class='argstr'>filename</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-synth' href='./../Overviews/Methods.html#synth'>synth</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-synthdefname' href='./../Overviews/Methods.html#synthdefname'>synthdefname</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-synthdefname' href='./../Overviews/Methods.html#synthdefname'>synthdefname</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-whichlive' href='./../Overviews/Methods.html#whichlive'>whichlive</a> </h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>//extract features for a given file
e = SCMIRAudioFile(Platform.resourceDir +/+ "sounds/a11wlk01.wav", [[MFCC, 13], [Chromagram, 12]]);

e.extractFeatures();

//now convert to live feature extractor (in this case must have carried out feature extraction above to get normalisation data, see below for alternatives)
l = SCMIRLive(e)

l.dump
l.featureinfo
l.normalizationinfo

//create SynthDef for this feature set with normalization
l.createSynthDef.add
//save to disk SynthDef with own specified name, no normalization
//l.createSynthDef(\SCMIRLiveownname,false).writeDefFile

l.createResponder({arg input; input.postln }); //create a language side responder for this feature extractor

//run Synth with the SynthDef already added, input bus is 8, which is first audio input on machine
a = l.run(8)

l.synth

l.removeResponder


//store for future use (assumes saved SynthDef as well, or at least will createSynthDef on reload before live use
l.save("/tmp/scmirlive1.scmirZ"); 

l.load("/tmp/scmirlive1.scmirZ"); 


a = l.run(8)

//short cut creation 
l = SCMIRLive.newFromFile("/tmp/scmirlive1.scmirZ"); 




//using with global norms

//calculate global norms
(
~files = [Platform.resourceDir +/+ "sounds/a11wlk01.wav", "/data/audio/mirdata/pixiesivebeentired.wav","/data/audio/mirdata/Yellow Submarine.wav"]; 
~featureinfo= [[MFCC,13],[Chromagram,12]]; 

{SCMIR.findGlobalFeatureNorms(~files,~featureinfo); }.fork
    
)

SCMIR.globalfeaturenorms //in this case, will be minimums in first array, maximums in second


//no need to extract fresh features in this case
e = SCMIRAudioFile(Platform.resourceDir +/+ "sounds/a11wlk01.wav", [[MFCC, 13], [Chromagram, 12]]);

//create SCMIRLive via this
l = SCMIRLive(e, SCMIR.globalfeaturenorms)

l.normalizationinfo

l.createSynthDef.add

l.createResponder({arg input; input.postln }); //create a language side responder for this feature extractor

//run Synth with the SynthDef already added, input bus is 8, which is first audio input on machine
a = l.run(8)




//example with live feature view GUI


//extract features for a given file
e = SCMIRAudioFile(Platform.resourceDir +/+ "sounds/a11wlk01.wav", [[MFCC, 13], [Chromagram, 12]]);

e.extractFeatures();

//now convert to live feature extractor
l = SCMIRLive(e)

//create SynthDef for this feature set with normalization; server must be booted already
l.createSynthDef.add

//create GUI
(
w=Window.new("25 features", Rect(200,400,300,300));

~ms= MultiSliderView.new(w, Rect(10,10,260,280));

~ms.value_(Array.fill(25,0.0));
~ms.valueThumbSize_(300/25);
~ms.indexThumbSize_(300/25);
~ms.gap_(0);

w.front;
)


(
l.createResponder({arg input; 

//input.postln;
{~ms.value_(input[3..(27)]); }.defer 
}); //create a language side responder for this feature extractor which updates the GUI
)

//run Synth with the SynthDef already added, input bus is 8, which is first audio input on machine
a = l.run(8);

l.removeResponder;

w.close;</pre>

<p><div class='doclink'>source: <a href='file:///Users/federicoreuben/Library/Application Support/SuperCollider/Extensions/SCMIR/SCMIRExtensions/HelpSource/Classes/SCMIRLive.schelp'>/Users/federicoreuben/Library/Application Support/SuperCollider/Extensions/SCMIR/SCMIRExtensions/HelpSource/Classes/SCMIRLive.schelp</a><br>link::Classes/SCMIRLive::<br>sc version: 3.7.2</div></div></body></html>